<!--
  ~
  ~  Licensed to the Apache Software Foundation (ASF) under one or more
  ~  contributor license agreements.  See the NOTICE file distributed with
  ~  this work for additional information regarding copyright ownership.
  ~  The ASF licenses this file to You under the Apache License, Version 2.0
  ~  (the "License"); you may not use this file except in compliance with
  ~  the License.  You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  ~
  -->

<assembly>
    <id>${project.version}</id>
    <formats>
        <format>tar.gz</format>
    </formats>
    <includeBaseDirectory>true</includeBaseDirectory>
    <fileSets>
        <fileSet>
            <directory>${project.parent.basedir}/script/bin</directory>
            <outputDirectory>./</outputDirectory>
            <lineEnding>unix</lineEnding>
            <fileMode>0755</fileMode>
            <includes>
                <include>auto.sh</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-admin/target/classes</directory>
            <outputDirectory>config</outputDirectory>
            <includes>
                <include>**/*.yml</include>
                <include>**/*.yaml</include>
                <include>**/log4j2.xml</include>
                <include>**/DinkyFlinkDockerfile</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-admin/target/classes</directory>
            <outputDirectory>/</outputDirectory>
            <includes>
                <include>**/dinky-loader/FlinkConfClass</include>
                <include>**/dinky-loader/ExpressionVariableClass</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-admin/target/dinky-admin-${project.version}/lib</directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/script/sql</directory>
            <outputDirectory>sql</outputDirectory>
            <includes>
                <include>dinky-mysql.sql</include>
                <include>dinky-pg.sql</include>
                <include>upgrade/*/*/*.sql</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>extends/flink1.14/dinky</outputDirectory>
            <includes>
                <include>dinky-catalog-mysql-1.14-${project.version}.jar</include>
                <include>dinky-client-1.14-${project.version}.jar</include>
                <include>dinky-connector-jdbc-1.14-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>extends/flink1.15/dinky</outputDirectory>
            <includes>
                <include>dinky-catalog-mysql-1.15-${project.version}.jar</include>
                <include>dinky-client-1.15-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>extends/flink1.16/dinky</outputDirectory>
            <includes>
                <include>dinky-catalog-mysql-1.16-${project.version}.jar</include>
                <include>dinky-client-1.16-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>extends/flink1.17/dinky</outputDirectory>
            <includes>
                <include>dinky-catalog-mysql-1.17-${project.version}.jar</include>
                <include>dinky-client-1.17-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>extends/flink1.18/dinky</outputDirectory>
            <includes>
                <include>dinky-catalog-mysql-1.18-${project.version}.jar</include>
                <include>dinky-client-1.18-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>extends</outputDirectory>
            <includes>
                <include>dinky-client-base-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>jar</outputDirectory>
            <includes>
                <include>%regex[dinky-app-1.\d+-${project.version}-jar-with-dependencies.jar]</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-cdc/dinky-cdc-plus/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-cdc-plus-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-clickhouse/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-clickhouse-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-doris/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-doris-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-hive/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-hive-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-mysql/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-mysql-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-oracle/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-oracle-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-phoenix/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-phoenix-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-postgresql/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-postgresql-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-sqlserver/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-sqlserver-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-starrocks/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-starrocks-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-metadata/dinky-metadata-presto/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-metadata-presto-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-alert/dinky-alert-dingtalk/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-alert-dingtalk-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-alert/dinky-alert-email/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-alert-email-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-alert/dinky-alert-http/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-alert-http-${project.version}.jar</include>
            </includes>
        </fileSet>

        <fileSet>
            <directory>${project.parent.basedir}/dinky-alert/dinky-alert-feishu/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-alert-feishu-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-alert/dinky-alert-sms/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-alert-sms-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dinky-alert/dinky-alert-wechat/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dinky-alert-wechat-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/docker/app</directory>
            <outputDirectory>jar</outputDirectory>
            <includes>
                <include>Dockerfile</include>
            </includes>
        </fileSet>
        <!--<fileSet>
            <directory>${project.parent.basedir}/dinky-web/dist</directory>
            <outputDirectory>html</outputDirectory>
            <includes>
                <include>*</include>
                <include>*/*</include>
            </includes>
        </fileSet>-->
    </fileSets>
</assembly>
