<!--
  ~
  ~  Licensed to the Apache Software Foundation (ASF) under one or more
  ~  contributor license agreements.  See the NOTICE file distributed with
  ~  this work for additional information regarding copyright ownership.
  ~  The ASF licenses this file to You under the Apache License, Version 2.0
  ~  (the "License"); you may not use this file except in compliance with
  ~  the License.  You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  ~
  -->

<assembly>
    <id>${project.version}</id>
    <formats>
        <format>tar.gz</format>
    </formats>
    <includeBaseDirectory>true</includeBaseDirectory>
    <fileSets>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-doc/bin</directory>
            <outputDirectory>./</outputDirectory>
            <lineEnding>unix</lineEnding>
            <fileMode>0755</fileMode>
            <includes>
                <include>auto.sh</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-admin/target/classes</directory>
            <outputDirectory>config</outputDirectory>
            <includes>
                <include>**/*.yml</include>
                <include>**/*.yaml</include>
                <include>**/log4j2.xml</include>
                <include>**/DinkyFlinkDockerfile</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-admin/target/dlink-admin-${project.version}/lib</directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-doc/sql</directory>
            <outputDirectory>sql</outputDirectory>
            <includes>
                <include>dinky.sql</include>
                <include>upgrade/*/*/*.sql</include>
            </includes>
        </fileSet>
        <!--<fileSet>-->
        <!--    <directory>${project.parent.basedir}/build/extends/</directory>-->
        <!--    <outputDirectory>plugins</outputDirectory>-->
        <!--    <includes>-->
        <!--        <include>%regex[dlink-catalog-mysql-1.\d+-${project.version}.jar]</include>-->
        <!--        <include>%regex[dlink-client-1.\d+-${project.version}.jar]</include>-->
        <!--    </includes>-->
        <!--</fileSet>-->
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>plugins/flink1.11/dinky</outputDirectory>
            <includes>
                <include>dlink-client-1.11-${project.version}.jar</include>
                <include>dlink-connector-jdbc-1.11-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>plugins/flink1.12/dinky</outputDirectory>
            <includes>
                <include>dlink-client-1.12-${project.version}.jar</include>
                <include>dlink-connector-jdbc-1.12-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>plugins/flink1.13/dinky</outputDirectory>
            <includes>
                <include>dlink-catalog-mysql-1.13-${project.version}.jar</include>
                <include>dlink-client-1.13-${project.version}.jar</include>
                <include>dlink-connector-jdbc-1.13-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>plugins/flink1.14/dinky</outputDirectory>
            <includes>
                <include>dlink-catalog-mysql-1.14-${project.version}.jar</include>
                <include>dlink-client-1.14-${project.version}.jar</include>
                <include>dlink-connector-jdbc-1.14-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>plugins/flink1.15/dinky</outputDirectory>
            <includes>
                <include>dlink-catalog-mysql-1.15-${project.version}.jar</include>
                <include>dlink-client-1.15-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>plugins/flink1.16/dinky</outputDirectory>
            <includes>
                <include>dlink-catalog-mysql-1.16-${project.version}.jar</include>
                <include>dlink-client-1.16-${project.version}.jar</include>
                <include>dlink-connector-jdbc-1.16-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>plugins/flink1.17/dinky</outputDirectory>
            <includes>
                <include>dlink-catalog-mysql-1.17-${project.version}.jar</include>
                <include>dlink-client-1.17-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>plugins</outputDirectory>
            <includes>
                <include>dlink-client-base-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/build/extends/</directory>
            <outputDirectory>jar</outputDirectory>
            <includes>
                <include>%regex[dlink-app-1.\d+-${project.version}-jar-with-dependencies.jar]</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-clickhouse/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-clickhouse-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-doris/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-doris-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-hive/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-hive-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-mysql/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-mysql-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-oracle/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-oracle-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-phoenix/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-phoenix-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-postgresql/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-postgresql-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-sqlserver/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-sqlserver-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-starrocks/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-starrocks-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-metadata/dlink-metadata-presto/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-metadata-presto-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-alert/dlink-alert-dingtalk/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-alert-dingtalk-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-alert/dlink-alert-email/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-alert-email-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-alert/dlink-alert-feishu/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-alert-feishu-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-alert/dlink-alert-wechat/target
            </directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>dlink-alert-wechat-${project.version}.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/dlink-doc/extends</directory>
            <outputDirectory>jar</outputDirectory>
            <includes>
                <include>Dockerfile</include>
            </includes>
        </fileSet>
        <!--<fileSet>
            <directory>${project.parent.basedir}/dlink-web/dist</directory>
            <outputDirectory>html</outputDirectory>
            <includes>
                <include>*</include>
                <include>*/*</include>
            </includes>
        </fileSet>-->
    </fileSets>
</assembly>